"START-EHAILING":
  kind: button
  checkpoint: true
  message:
    title: eHailing Chatbot
    body: "> Hi {{ s.wa_name }}, I'm a PoC eHailing PickDrive assistant.\n\nTo begin, click the button below"
    footer: pywce
    buttons:
      - Begin
  routes:
    "begin": "SELECT-RIDE"

"SELECT-RIDE":
  kind: button
  prop: ride_type
  message:
    title: PickDrive
    body: "Great, to offer you with `exclusive` riding experience, select your preferred ride type"
    footer: "Img credit: istock - lemono"
    header:
      type: image
      url: "https://media.istockphoto.com/id/1289790084/vector/tiny-male-customer-character-order-taxi-via-smartphone-app-with-map-young-man-using.jpg?s=1024x1024&w=is&k=20&c=v30WHxsai3Gpb2ZIB6PWvojd5CKLcBDnvsKTZuGruC0="
    buttons:
      - Ride
      - Standard
      - Luxury
  routes:
    "re:.*": "PICKUP-LOCATION"

"PICKUP-LOCATION":
  kind: request-location
  message: "Where would you like to be picked from?"
  routes:
    "re:.*": "DESTINATION-LOCATION"

"DESTINATION-LOCATION":
  kind: request-location
  on-receive: "example.ehailing.hooks.location.save_destination"
  message: "Where would you like to go?"
  routes:
    "re:.*": "RIDE-OFFER"

"RIDE-OFFER":
  kind: button
  message:
    title: Ride
    body: |
      üí∞ Ride fee: USD $3.50
      üïë Arrival time: ~3mins
    buttons:
      - Accept
      - Counter Offer
  routes:
    "accept": "AVAILABLE-DRIVERS"
    "counter offer": "RIDE-COUNTER-OFFER"

"AVAILABLE-DRIVERS":
  kind: list
  message:
    title: Available Drivers
    body: "I found rides matching your choice. Select one you like and they will be ready to pick you up"
    button: View Drivers
    sections:
      "Available Rides":
        0:
          title: Donald | $3.50
          description: Honda Fit, 300m - (4.0) ‚≠ê
        1:
          title: Pamela | $3.20
          description: Toyota Aqua, 300m - (3.8) ‚≠ê
      "Other rides":
        2:
          title: Tanaka | $3.00
          description: Honda Fit, 250m - (4.2) ‚≠ê
        3:
          title: Constance | $4.00
          description: Nissan Note, 100m - (2.8) ‚≠ê
        4:
          title: Mr Smith | $3.00
          description: Toyota Vitz, 320m - (3.2) ‚≠ê
  routes:
    "re:.*": "CONFIRM-OFFER"

"CONFIRM-OFFER":
  kind: button
  typing: true
  react: "‚úçüèº"
  on-receive: "example.ehailing.hooks.capture_ride.capture"
  message:
    title: PickDrive Ride
    body: |
      Ride: `{{ p.ride_type }}`
      Driver: `Donald`
      Vehicle Color: `Silver`
      Reg Number: `QZW 0123`
      
      Confirm to notify the driver to come pick you up now
    buttons:
      - Confirm
      - Abort
  routes:
    "confirm": "DRIVER-COMMAND-COME"
    "abort": "START-MENU"

"DRIVER-COMMAND-COME":
  kind: button
  message:
    title: PickDrive
    body: "Driver is coming to your location now!"
    footer: "Expect few seconds delay"
    buttons:
      - Report
  routes:
    "report": "REPORT"
